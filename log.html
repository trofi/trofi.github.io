<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>log</title>
        <link rel="stylesheet" type="text/css" href="./css/default.css" />
        <link rel="stylesheet" type="text/css" href="./css/code.css" />
        <link rel="stylesheet" type="text/css" href="./css/skylighting.css" />

        <link rel="alternate" type="application/atom+xml" href="./feed/atom.xml" title="Atom 1.0" />
        <link rel="alternate" type="application/rss+xml" href="./feed/rss.xml" title="RSS 2.0" />
        <link rel="shortcut icon" href="./images/favicon.ico" />
    </head>
    <body>
        <div id="navigation">
            <a href="./">home</a>
            <a href="./blog.html">blog</a>
            <a href="./log.html">log</a>
            <a href="./feed/atom.xml">atom</a>
            <a href="./feed/rss.xml">rss</a>
            <a href="./about.html">about</a>
            <a href="./contact.html">contact</a>
        </div>

        <div id="content">
            <h1>log</h1>
            

            <p>These are notable or amusing bugs and patches I dealt with in the past.</p>
<h2 id="section">2024</h2>
<p>26 Nov: <code>nix</code> bug: <a href="https://github.com/NixOS/nix/pull/11974"><code>bz2</code> <code>meson</code> detection failure</a>.</p>
<p>6 Nov: <code>pixman</code> bug: <a href="https://gitlab.freedesktop.org/pixman/pixman/-/merge_requests/128"><code>rvv</code> <code>riscv64</code> extension is not fully detected</a>.</p>
<p>31 Oct: <code>swtpm</code> bug: <a href="https://github.com/stefanberger/swtpm/pull/941">32-bit file API use on filesystem with 64-bit inodes</a>.</p>
<p>24 Oct: <code>gcc</code> bug: <a href="https://gcc.gnu.org/PR117288"><code>-flto</code> fails on array initializers</a>.</p>
<p>28 Oct: <code>unbound</code> bug: <a href="https://github.com/NLnetLabs/unbound/pull/1167"><code>make --shuffle</code> found multiple targets rule error</a>.</p>
<p>13 Oct: <code>gcc</code> bug: <a href="https://gcc.gnu.org/PR117114">false positive warnings on overrides for multiple inheritance</a>.</p>
<p>29 Sep: <code>gcc</code> bug: <a href="https://gcc.gnu.org/PR116880">coroutine waiter destroyed wait object too early</a>.</p>
<p>18 Sep: <code>nixpkgs</code> bug: <a href="https://github.com/NixOS/nixpkgs/pull/180872#issuecomment-2359355734"><code>/etc/wpa_supplicant.conf</code> is zeroed out</a>.</p>
<p>6 Sep: <code>nix</code> bug: <a href="https://github.com/NixOS/nix/issues/11441"><code>toml</code> parser changes timestamp parsing/printing rules</a>.</p>
<p>24 Aug: <code>warzone</code> bug: <a href="https://github.com/Warzone2100/warzone2100/pull/4051">use-after-free detected by <code>gcc</code> warning</a>.</p>
<p>24 Aug: <code>diffoscope</code> bug: <a href="https://salsa.debian.org/reproducible-builds/diffoscope/-/merge_requests/144">crash when attempt to diff a symlink to the directory</a>.</p>
<p>29 July: <code>less</code> bug: <a href="https://github.com/gwsw/less/issues/549"><code>PageUp</code> / <code>PageDown</code> keys don’t work anymore</a>.</p>
<p>16 July: <code>gcc</code> bug: <a href="https://gcc.gnu.org/PR115961">saturated truncation works incorrectly on bitfields</a>.</p>
<p>4 June: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/pull/314683"><code>stdenv</code> fails on <code>sourceRoot</code> with dashes</a>.</p>
<p>1 June: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/pull/316334"><code>gcc.libgcc</code> on <code>musl</code> is not stripped</a>.</p>
<p>14 April: <code>linux</code> bug: <a href="https://lkml.org/lkml/2024/4/14/134"><code>eevdf</code> scheduler sometimes crashes kernel</a>.</p>
<p>1 April: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/pull/300565">fix <code>pcre2</code> to enable <code>jit</code></a>.</p>
<p>14 Mar: <code>gentoo</code> bug: <a href="https://bugs.gentoo.org/927017"><code>eautoreconf</code> does not handle <code>AC_CONF_AUX_DIR</code></a>.</p>
<p>9 Mar: <code>nix</code> bug: <a href="https://github.com/NixOS/nix/issues/10202"><code>nix</code> does not handle root flakes</a>.</p>
<p>16 February: <code>waf</code> bug: <a href="https://github.com/NixOS/nixpkgs/pull/289405"><code>i686-linux</code> does not fit into 3GB</a>.</p>
<p>30 January: <code>binutils</code> bug: <a href="https://sourceware.org/PR31319"><code>.arch i386</code> is no accepted by <code>gas</code> anymore</a>.</p>
<p>28 January: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/pull/284541">document bootstrap seed update procedure</a>.</p>
<p>13 January: <code>mikmod</code>: <a href="https://sourceforge.net/p/mikmod/patches/17/">“buffer overflow” detected at startup</a>.</p>
<p>13 January: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/pull/276343"><code>autoconf: 2.71 -&gt; 2.72</code> update</a>.</p>
<h2 id="section-1">2023</h2>
<p>26 December: <code>ofborg</code>: <a href="https://github.com/NixOS/ofborg/pull/669">map modified files according to <code>.meta.position</code></a>.</p>
<p>16 December: <code>iwd</code>: <a href="https://git.kernel.org/pub/scm/network/wireless/iwd.git/commit/?id=688d27700833258a139a6fbd5661334bd2c9fa98">fix data corruption in <code>aarch64</code></a>.</p>
<p>8 December: <code>libbpf</code>: <a href="https://git.kernel.org/pub/scm/linux/kernel/git/bpf/bpf-next.git/commit/?id=32fa058398624166dd04ff4af49cfef69c94abbc">report nature of <code>ELF</code> section corruption</a>.</p>
<p>3 December: <code>tracker</code>: <a href="https://gitlab.gnome.org/GNOME/tracker/-/merge_requests/638"><code>tracker</code> used invalid code to test <code>strftime()</code> features</a>.</p>
<p>1 December: <code>nixpkgs</code> bug: <a href="https://github.com/NixOS/nixpkgs/issues/271473"><code>nixpkgs</code> uses very old <code>libelf</code> library where one would expect <code>elfutils</code></a>.</p>
<p>28 November: <code>php</code>: <a href="https://github.com/php/php-src/pull/12821">Fix build on <code>gcc-14</code> <code>C11</code> atomics</a>.</p>
<p>14 November: <code>libglgnd</code>: <a href="https://gitlab.freedesktop.org/glvnd/libglvnd/-/merge_requests/288">Enable 64-bit file APIs</a>.</p>
<p>11 November: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/pull/266828">Fix broken <code>SUID</code> binary in <code>pam</code> package</a>.</p>
<p>10 November: <code>duperemove</code>: <a href="https://github.com/markfasheh/duperemove/pull/324">Fix quadratic slowdown for <code>partial</code> mode</a>.</p>
<p>9 November: <code>duperemove</code>: <a href="https://github.com/markfasheh/duperemove/pull/323">Fix file sharing accounting</a>.</p>
<p>7 November: <code>duperemove</code>: <a href="https://github.com/markfasheh/duperemove/pull/322">Fix quadratic slowdown of small inline files</a>.</p>
<p>5 November: <code>btrfs-progs</code>: <a href="https://github.com/kdave/btrfs-progs/pull/706">Fix accidental SCAN mapped to FORGET <code>ioctl</code></a>.</p>
<p>4 November: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/pull/265454">one-liner to reduce meld closure</a>.</p>
<p>1 November: <code>duperemove</code>: <a href="https://github.com/markfasheh/duperemove/pull/318">one-liner to speed deduping up 2x</a>.</p>
<p>31 October: <code>duperemove</code> bug: <a href="https://github.com/markfasheh/duperemove/issues/316">hang up on 1 million of small files</a>.</p>
<p>23 October: <code>gcc</code>: <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=eaf75155f38a51b2d9d49c6c1b1e1639e3d0591a"><code>libgcc</code>: make heap-based trampolines conditional on <code>libc</code> presence</a>.</p>
<p>20 October: <code>acme-rs</code> <a href="https://github.com/kariustobias/acme-rs/pull/29">Fix non-standalone challenge paths</a>.</p>
<p>28 September: <code>gcc</code>: <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=7525707c5f3edb46958c4fdfbe30de5ddfa8923a"><code>ggc</code>: do not wipe out unrelated data via <code>gt_ggc_rtab</code></a>.</p>
<p>27 September: <code>gcc</code>: <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=043a6fcbc27f8721301eb2f72a7839f54f393003"><code>ipa-utils</code>: avoid uninitialized probabilities on <code>ICF</code></a>.</p>
<p>16 September: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/commit/223b83ca54ac118f7769694b09af3547d5c39224">disable <code>bash</code> <code>malloc()</code> implementation</a>.</p>
<p>14 September: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/pull/255192">always mangle out <code>__FILE__</code> paths to shrink closure</a>.</p>
<p>31 July: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/commit/a3d2e71a6c6fbf389c19940899440228591b7b92">fix file corruption caused by parallel strip</a>.</p>
<p>15 March: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/commit/19680e9902c2f8607022189c8583c9d697969fa1">enable parallel installs for pa rallel builds</a>.</p>
<p>20 February: <code>libomxil-bellagio</code>: <a href="https://sourceforge.net/p/omxil/patches/8/">fix stack overread</a>.</p>
<p>5 February: <code>xmms2</code>: <a href="https://github.com/xmms2/xmms2-devel/commit/d9d64c1d303593205251494ea4c8847174dd5e9b">fix <code>UPD</code> visualization server on dual-stack <code>IPv6</code></a>.</p>
<p>11 January: <code>nix-olde</code>: <a href="https://github.com/trofi/nix-olde">started a new project to find outdated <code>nixpkgs</code> packages</a>.</p>
<h2 id="section-2">2022</h2>
<p>30 December: <code>xmms2</code>: <a href="https://github.com/xmms2/xmms2-devel/commit/39d31d4a7ae463f3df7a09915fe61e2574f4d95f">fix stuck <code>FLAC</code> playback</a>.</p>
<p>1 December: <code>AoC</code>: <a href="https://github.com/trofi/AoC">started participating in <code>Advent of Code</code></a>.
Turned it into <code>rust</code> learning exercise.</p>
<p>13 September: <code>glibc</code>: <a href="https://sourceware.org/git/?p=glibc.git;a=commitdiff;h=2d7ed98add14f75041499ac189696c9bd3d757fe">fix <code>MAKEFLAGS</code> assignment for upcoming <code>make-4.4</code></a>.</p>
<p>11 September: <code>make</code>: <a href="https://git.savannah.gnu.org/cgit/make.git/commit/?id=ca4234c4b550618df2194e0617c43bb12524f820">fix <code>--shuffle</code> crash on <code>SECONDEXPANSION</code> prerequisites</a>.</p>
<p>16 August: <code>gcc</code>: <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=ef3165736d9daafba88adb2db65b2e8ebf0024ca">add build dependencies on <code>i386-builtin-types.inc</code></a>.
Exposed by <code>make --shuffle</code>.</p>
<p>16 August: <code>gcc</code>: <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=2b403297b111c990c331b5bbb6165b061ad2259b">driver: fix environ corruption after <code>putenv()</code></a>.</p>
<p>11 August: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/pull/185537">don’t inhibit stripping when <code>debuginfo</code> splitter is enabled</a>.</p>
<p>28 July: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/commit/88c63ca65a30eb83bd2a00d183a9f11819be43ad">enable stripping of cross-compilers</a>.</p>
<p>27 June: <code>gcc</code>: <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=3b21c21f3f5726823e19728fdd1571a14aiae0fb3"><code>c++</code>: avoid <code>&lt;memory&gt;</code> poisoning on <code>musl</code></a>.
25 June: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/b43d140b3f79e024489bbd9338d81d2ac23fc437">add missing order-only <code>.hs-boot</code> dependencies</a>.</p>
<p>4 June: <code>make</code>: <a href="https://git.savannah.gnu.org/cgit/make.git/commit/?id=621d3196fae94e9006a7e9c5ffdaf5ec209bf832">add <code>--shuffle</code> mode</a>.</p>
<p>4 June: <code>nixpkgs</code> bug: <a href="https://github.com/NixOS/nixpkgs/issues/176225"><code>unzip</code> unpacked different files on <code>linux</code>/<code>darwin</code></a>.</p>
<p>23 May: <code>glibc</code>: <a href="https://sourceware.org/git/?p=glibc.git;a=commitdiff;h=5a5f94af0542f9a35aaa7992c18eb4e2403a29b9">fix build against ancient <code>gcc-4.7</code></a>.</p>
<p>15 April: <code>gcc</code>: <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=90a29845bfe7d6002e6c2fd49a97820b00fbc4a3"><code>gcov-profile</code>: Allow negative counts of indirect calls</a>.</p>
<p>14 April: <code>binutils</code>: <code>m68k</code> <a href="https://sourceware.org/git/?p=binutils-gdb.git;a=commitdiff;h=c641fe0dcb886dc1b8a235ab2b236275ee46510a">fix quadratic slowdown of label alignment check</a>.</p>
<p>7 April: <code>gcc</code>: <code>ia64</code> <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=cef03728234644b1a9ad5bd8e94daeac8650a71b"><code>libgcc</code>: don’t compile glibc-based unwinder without libc headers</a>.</p>
<p>22 February: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/commit/86be4335afe7ce177a8e3c0b0293e1652d4ce682">fix <code>crt</code> file poisoning in bootstrap</a>.</p>
<p>20 March: <code>vim</code>: <a href="https://github.com/vim/vim/pull/9978">fix tutor parallel install</a>.</p>
<p>12 March: <code>gcc</code>: <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=638e630142b2cf691db890ab9eb6d77a65339c54">avoid <code>TEXTREL</code>s in shared library</a>.</p>
<p>17 March: <code>nix</code>: <a href="https://github.com/NixOS/nix/commit/d58453f72ea584cac2e3362fd6a73fcf0e3b615e">fix <code>nix store gc</code> quadratic behaviour</a>.</p>
<p>13 March: <code>nix</code>: <a href="https://github.com/NixOS/nix/commit/6b1872312f1b505334acb67b8bf7990b0a0fdbd8">fix <code>nix store gc</code> optimized store</a>.</p>
<p>13 January: <code>rustc</code> bug: <a href="https://github.com/rust-lang/rust/issues/92869"><code>lto = "thin"</code> causes bad code generation</a>.</p>
<h2 id="section-3">2021</h2>
<p>21 November: <code>flatbuffers</code>: <a href="https://github.com/google/flatbuffers/pull/6946">fix undefined evaluation order of function parameters</a>.</p>
<p>10 November: <code>nix</code>: <a href="https://github.com/NixOS/nix/commit/edfc5b2f127bfbaebbd48fcd7b35034345ce2cfa">fix quadratic slowdown of lookup and deletion of realizations for CA derivations</a>.</p>
<p>7 November: <code>espeak-ng</code>: <a href="https://github.com/espeak-ng/espeak-ng/pull/1036">fix <code>SIGSEGV</code> on parallel builds</a>.
Build rules shared temporary file names.</p>
<p>9 September: <code>nixpkgs</code>: <a href="https://github.com/NixOS/nixpkgs/commit/34e468dc4268cee86aa019ae9bc52768e60fb5f7">add <code>s390x</code> cross-compilation target</a>.</p>
<p>21 August: <code>guix</code>: <a href="https://git.savannah.gnu.org/cgit/guix.git/commit/?id=79c07db3d52fb97f38de13d409264c5194e132fe">fix <code>guix pull</code> hang up due to <code>po4a</code> bug</a>.</p>
<p>6 August <code>gcc</code>: <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=27a1fb385b7fe706f05608e53f3e91d7d3442b8b"><code>c++</code>: fix <code>ptrmemfunc</code> template instantiation</a>.</p>
<p>23 July: <code>linux</code>: <code>mm</code> <a href="https://github.com/torvalds/linux/commit/69e5d322a2fb86173fde8bad26e8eb38cad1b1e9">fix <code>page_poison=1</code> data corruption</a>.
Without the change freeing a page always triggered assertions.</p>
<p>27 June: <code>libffi</code>: <a href="https://github.com/libffi/libffi/commit/132699b95d3ee4d889ea2a80540acf3300987dad"><code>configure.ac</code>: add <code>--disable-exec-static-tramp</code> flag</a>.</p>
<p>13 June: <code>ccache</code> bug: <a href="https://github.com/ccache/ccache/issues/860"><code>PWD=.</code> seems to trigger asserts in <code>ccache</code></a>.</p>
<p>29 April: <code>linux</code>: <code>mm</code> <a href="https://github.com/torvalds/linux/commit/9df65f522536719682bccd24245ff94db956256c">fix data corruption caused by <code>debug_pagealloc=1</code></a>.
Without the fix zero-initialized pages were returned as <code>0xaa</code>-initialized.</p>
<p>29 April: <code>linux</code>: <code>mm</code> <a href="https://github.com/torvalds/linux/commit/8e9b16c47680f6e7d6e5864a37f313f905a91cf5">fix endless recursion tracking <code>page_owner</code></a>.</p>
<p>29 April: <code>linux</code>: <code>ia64</code> <a href="https://github.com/torvalds/linux/commit/99e729bd40fb3272fa4b0140839d5e957b58588a">fix symbolizer crash</a>.</p>
<p>2 April: <code>linux</code>: <code>ia64</code> <a href="https://github.com/torvalds/linux/commit/7ad1e366167837daeb93d0bacb57dee820b0b898">fix <code>ptrace()</code> stack pointer fetch</a>.</p>
<p>30 March: <code>linux</code>: <code>hpsa</code> <a href="https://github.com/torvalds/linux/commit/02ec144292bc424a5800d45d4cb472c66e97c520">fix <code>ia64</code> boot failure for unaligned SCSI commands</a>.</p>
<p>12 March: <code>linux</code>: <code>ia64</code> <a href="https://github.com/torvalds/linux/commit/61bf318eac2c13356f7bd1c6a05421ef504ccc8a">fix <code>ptrace(PTRACE_SYSCALL_INFO_EXIT)</code> sign</a>.</p>
<p>12 March: <code>linux</code>: <code>ia64</code> <a href="https://github.com/torvalds/linux/commit/0ceb1ace4a2778e34a5414e5349712ae4dc41d85">fix tracing of break-based syscalls</a>.</p>
<p>5 February: <code>glibc</code>: <a href="https://sourceware.org/git/?p=glibc.git;a=commitdiff;h=c3479fb7939898ec22c655c383454d6e8b982a67"><code>nsswitch</code>: return result when <code>nss</code> database is locked</a>.</p>
<p>3 February: <code>mc</code>: <a href="https://github.com/MidnightCommander/mc/commit/6394547dbffbad44ea50c64c282de4b610ca07bf">fix shadow render crash</a>.</p>
<p>11 January: <code>gcc</code>: <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=11056ab7687f7156846e93557c9171b77713bd7e">fix <code>modref</code> analysis on <code>RVO</code> statements</a>.</p>
<h2 id="section-4">2020</h2>
<p>6 September: <code>gcc</code>: <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=4ecf368f4b4223fb2df4f3887429dfbb48852e38"><code>gcov</code>: fix <code>TOPN</code> streaming from shared libraries</a>.</p>
<p>25 July: <code>gcc</code>: <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=cbf10ac51c0b889e930f260a3d1fb601332befdf">don’t crash on unoptimized lto functions</a>.</p>
<p>21 July: wrote <a href="https://wiki.gentoo.org/wiki/Stack_smashing_debugging_guide" class="uri">https://wiki.gentoo.org/wiki/Stack_smashing_debugging_guide</a>
article to aid in stack smashing debugging.</p>
<p>14 July: <code>gcc</code>: <code>sparc</code> <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=87891d5eafe8d1de90b9d9b056eca81c508d1c77">fix <code>PIE</code> destructors</a>.</p>
<p>11 July: <code>glibc</code>: <code>ia64</code> <a href="https://sourceware.org/git/?p=glibc.git;a=commitdiff;h=073edbdfabaad4786e974a451efe4b6b3f7a5a61">fix build against <code>-fno-common</code> toolchain</a>.</p>
<p>31 May: <code>proftpd</code>: <a href="https://github.com/proftpd/proftpd/commit/6ac1c727ddfd70080b38097e5484390ec84ef9be">fix <code>SIGSEGV</code> on <code>pstrcat()</code> call without a sentinel <code>NULL</code></a>.
And a follow up <a href="https://github.com/proftpd/proftpd/commit/c5f98b6e047e0e5ca841372d78d06c05fe8770c6">change</a>
to turn such bugs into compile-time errors.</p>
<p>21 April: <code>ccache</code> bug: <a href="https://github.com/ccache/ccache/issues/582"><code>ccache</code> does not handle directories in <code>-fprofile-use=</code></a>.</p>
<p>15 April: <code>qemu</code>: <code>alpha</code> target fix <a href="https://gitlab.com/qemu-project/qemu/-/commit/386d38656889a40d29b514ee6f34997ca18f741e">for <code>epoll_create()</code> emulation</a>.</p>
<p>16 March: <code>ccache</code> bug: <a href="https://github.com/ccache/ccache/issues/564">another attempt by <code>ccache</code> to delete <code>/dev/null</code></a>.</p>
<p>18 January: <code>seekwatcher</code>: <a href="https://github.com/trofi/seekwatcher">forked and fixed minor bugs in a project by Chris Mason</a>.</p>
<p>3 January: <code>binutils</code>: <code>ia64</code> <a href="https://sourceware.org/git/?p=binutils-gdb.git;a=commitdiff;h=b26a3d5827edcb942b3af5b921bf317bbc0c8e83">fix for <code>binary</code> <code>ld</code> merge</a>.</p>
<h2 id="section-5">2019</h2>
<p>25 November: <code>nix-guix-gentoo</code>: <a href="https://github.com/trofi/nix-guix-gentoo">moved <code>nix</code> and <code>guix</code> <code>ebuilds</code> to an external overlay</a>.</p>
<p>28 April: <code>ccache</code> bug: <a href="https://github.com/ccache/ccache/issues/397"><code>ccache</code> tried to rename <code>/dev/null</code></a>.</p>
<p>27 April: <code>libffi</code>: <code>hppa</code> <a href="https://github.com/libffi/libffi/commit/fadf1eb530713fde0be9774d926bc8202c97e379">avoid <code>TEXTREL</code> in .eh_frame section</a>.</p>
<p>20 March: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/973077ac63c79988f2d5f25d13b60dce82f9e8dd">fix 64-bit comparisons on <code>ppc32</code></a>.</p>
<p>10 March: <code>linux</code>: <code>tty/vt</code> race condition crash <a href="https://github.com/torvalds/linux/commit/46ca3f735f345c9d87383dd3a09fa5d43870770e">fix write/write race in <code>ioctl(KDSKBSENT)</code> handler</a></p>
<h2 id="section-6">2018</h2>
<p>31 Dec: <code>linux</code>: <code>alpha</code> <a href="https://github.com/torvalds/linux/commit/491af60ffb848b59e82f7c9145833222e0bf27a5">fix page fault handling for <code>r16</code>-<code>r18</code> registers</a>.
Without the change page fault handler corrupted wrong register.</p>
<p>21 September: <code>ski</code>: <a href="https://github.com/trofi/ski">started the fork of <code>HP</code>’s <code>ski</code> to adapt to modern systems</a>.</p>
<p>3 August: <code>gcc</code>: <code>sh</code> <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=f6a9dfd3699430b40febb4d4a894e5a9e6302874">avoid <code>TEXTRELs</code> in <code>PIC</code> code</a>.</p>
<p>16 July: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/8ec48990fee9e245bb2fe40dc6f65b61b8612157">skip <code>-Bsymbolic</code> on unregisterised targets</a>.
This fixed <code>sh4</code> build on <code>ghc</code>.</p>
<p>19 May: <code>libressl</code>: <code>hppa</code> <a href="https://github.com/libressl/portable/pull/426">fix assembly syntax around semicolons</a>.</p>
<p>16 May: <code>goircbot</code>: <a href="https://github.com/StalkR/goircbot/pull/18">set bot status before channel joins, not after</a>.</p>
<p>17 February: <code>libffi</code>: <code>ia64</code> <a href="https://github.com/libffi/libffi/commit/b58caef7fd620408be9239ac24ea89d5bc84f30b">fix small struct return</a>.</p>
<p>11 February: <code>libffi</code>: <code>ia64</code> <a href="https://github.com/libffi/libffi/commit/11de69ddb788e4d87ef653898878384116ac16c6">fix variadic function closures with FP arguments</a>.</p>
<h2 id="section-7">2017</h2>
<p>21 December: <code>glibc</code>: <code>m68k</code> <a href="https://sourceware.org/git/?p=glibc.git;a=commitdiff;h=6eb7e1da0e805e2893a0b70a5813641529d8c7e2">fix clobbering <code>a5</code> in <code>setjmp()</code></a>.</p>
<p>18 December: <code>glibc</code>: <code>mips32</code> <a href="https://sourceware.org/git/?p=glibc.git;a=commitdiff;h=c85c564d1442f0bc09a6c80fca025f004e12d044">fix clobbering <code>s0</code> in <code>setjmp()</code></a>.</p>
<p>18 December: <code>glibc</code>: <code>mips64</code> <a href="https://sourceware.org/git/?p=glibc.git;a=commitdiff;h=368b6c8da9f8ae453f5d70f8a62dbf3f1b6d5995">fix clobbering <code>s0</code> in <code>setjmp()</code></a>.</p>
<p>17 October: <code>libffi</code>: <code>ia64</code> <a href="https://github.com/libffi/libffi/commit/ed7488c003765c7ee71b7da3e8c21f431b043809">unbreak small struct handling</a>.</p>
<p>3 October: <code>fish-shell</code>: <a href="https://github.com/fish-shell/fish-shell/pull/4444">fix <code>printf "%o"</code> on big-endian systems</a>.</p>
<p>19 August: <code>pax-utils</code>: <a href="https://gitweb.gentoo.org/proj/pax-utils.git/commit/?id=720becce1314db8c0af8442650f496d972475327">fixed crash on <code>ia64</code> binaries</a>.</p>
<p>18 July: found <code>nettle</code> data corruption on <code>sparc</code> due to reuse of local
variable. It was fixed upstream with <a href="https://git.lysator.liu.se/nettle/nettle/-/commit/dcda81d796de2f4a16fd7e9e7a5d07baa288f147">this commit</a>.</p>
<p>14 July: <code>libunwind</code>: <code>ia64</code> <a href="https://github.com/libunwind/libunwind/pull/35">disable unimplemented <code>dwarf</code> support</a>.</p>
<p>10 July: <code>ruby</code>: <code>ia64</code>: <a href="https://github.com/ruby/ruby/commit/7aa74a0d0a22d74f1b3053280c56501aaf0b1e3c">fix garbage collector scanning of <code>RBS</code> area</a>.</p>
<p>24 June: <code>binutils</code>: <code>ia64</code> <a href="https://sourceware.org/git/?p=binutils-gdb.git;a=commitdiff;h=5cc4ca837deac7dc962d8a3741aa120c50ab41da">fix for <code>strip</code> crash with broken hint</a>.</p>
<p>30 May: <code>openrc</code>: <a href="https://github.com/OpenRC/openrc/commit/0ddee9b7d2b8dea810e252ca6a95c457876df120">fix buffer overflow in <code>openrc-init</code></a>.</p>
<p>1 May: <code>linux</code>: <code>ia64</code> <a href="https://github.com/torvalds/linux/commit/a25fb8508c1b80dce742dbeaa4d75a1e9f2c5617">fix module loading on <code>gcc-5.4+</code></a>.</p>
<p>24 April: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/b68697e579d38ca29c2b84377dc2affa04659a28">put const objects into <code>.rodata</code></a>.</p>
<h2 id="section-8">2016</h2>
<p>2 September: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/f93c363fab1ac8ce6f0b474f5967b0b097995827">extend worker/wrapper limit to specializers</a>.</p>
<p>1 September: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/a48de37dcca98e7d477040b0ed298bcd1b3ab303">restore limit on worker/wrapper transform</a>.
Without the change <code>ghc</code> spent a lot of time to generate large slow functions.</p>
<p>30 August: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/a5d26f26d33bc04f31eaff50b7d633444192b4cb">enable parallel GC scan for large nurseries</a>.</p>
<p>10 March: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/c42cdb7f6dcfd519d9607ac9fa53f049b2922fb8">fix Float and Double cross-compilation</a>.</p>
<p>6 March: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/ade1a461ab4ba3e6de3c4afe9fe9766b7b4e51b3">fix closure alignment on <code>m68k</code></a>.
Without it garbage collector crashed with assertion failures.</p>
<p>6 March: <code>qemu</code> bug: <code>m68k</code> <a href="https://github.com/vivier/qemu-m68k/issues/6">generated invalid <code>TCG</code></a>.</p>
<p>5 January: <code>gcc</code>: <code>ia64</code> <a href="https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=face88a110a3c1970119ba5fea9679609242975c">don’t use dynamic relocations for local symbols</a>.</p>
<h2 id="section-9">2015</h2>
<p>7 August: <code>mtpfs</code>: <a href="https://github.com/cjd/mtpfs/pull/4">open <code>device=0</code>, not a random one</a>.</p>
<p>7 July: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/5857e0afb5823987e84e6d3dd8d0b269b7546166">fix wake up on bad file descriptors in <code>select()</code> backend</a>.</p>
<p>23 June: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/c0847967caf51ea4ca88d0ffc25fe1bd99dcabed">fix <code>PLT</code> relocation support on <code>powerpc</code> <code>ghci</code></a>.</p>
<h2 id="section-10">2014</h2>
<p>14 December: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/fa31e8f4a0f853848d96549a429083941877bf8d">fix shared library support on <code>ppc</code></a>.</p>
<p>4 September: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/e18525fae273f4c1ad8d6cbe1dea4fc074cac721">fix code/data pointer type confusion in CMM</a>.
Without the change on <code>ia64</code> function pointers were incorrect due to
missing function descriptor indirection.</p>
<p>26 August: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/43f1b2ecd1960fa7377cf55a2b97c66059a701ef">fix large literal emission for unregisterised builds</a>.</p>
<p>28 July: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/f510c7cac5b2e9afe0ebde2766a671c59137f3cc">fix <code>openTempFiles</code> linear slowdown</a>
due to predictable temp files.</p>
<p>23 May: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/9fd507e5758f4141ac2619f0db57136bcab035c6">fix CPU hangs of threaded runtime on bad file descriptors</a>.
This fixed battery drain by <code>xmobar</code> on my laptop.</p>
<p>19 April: <code>dars</code>: <a href="https://bugs.darcs.net/issue2364">corrupted fetcher due to temp file collision</a>.</p>
<p>7 April: <code>linux</code>: <a href="https://github.com/torvalds/linux/commit/800ee2247f483b6d05ed47ef3bbc90b56451746c">fix crash on thread pool remount</a>.</p>
<p>4 March: <code>lambdabot</code>: <a href="https://github.com/lambdabot/lambdabot/pull/76">add <code>CODEPAGE</code> command</a>.</p>
<h2 id="section-11">2013</h2>
<p>13 December: <code>cabal</code>: <a href="https://github.com/haskell/cabal/pull/1614">use <code>ByteString</code> instead of <code>String</code></a>.
This allowed me to upload <code>raincat</code> release on <code>hackage</code>.</p>
<p>25 November: <code>trofi.github.io</code>: <a href="https://github.com/trofi/trofi.github.io.gen">moved the blog to <code>GitHub pages</code></a>.</p>
<p>3 July: <code>uselex</code>: started <a href="https://github.com/trofi/uselex">new <code>uselex</code> project</a>
and unused code in many projects with it.</p>
<p>13 September: <code>linux</code>: <a href="https://github.com/torvalds/linux/commit/80970472179a45609c0b11b80619bc8c32b15f77">enable <code>-Werror=implicit-int</code> by default</a>.</p>
<p>23 January: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/52f554582339d14c28a3cc91385f9cb0343f6779">fix cross-compilation of <code>integer-gmp</code></a>.
Instead of runtime-detection of structure layout we now use <code>autoconf</code> macros.</p>
<h2 id="section-12">2012</h2>
<p>31 October: <code>bdelta</code>: <a href="https://github.com/jjwhitney/BDelta/pull/2">25% speed up of <code>--all-in-ram</code> option</a>.</p>
<p>29 October: <code>xmms2</code>: <a href="https://github.com/xmms2/xmms2-devel/commit/ef1dd4afa356519874de3ac610e03635150c8a08">fix infinite loop on broken <code>.cue</code> files</a>.</p>
<p>26 September: <code>bdelta</code>: <a href="https://github.com/jjwhitney/BDelta/pull/1">add <code>--all-in-ram</code> option to get 3x speed up</a>.</p>
<p>24 April: <code>linux</code>: <code>btrfs</code> <a href="https://github.com/torvalds/linux/commit/0d2450abfa359ff94a2bee64a7daeba68c346c81">feature to change thread pool sizes</a>.</p>
<p>16 April: <code>linux</code>: <code>btrfs</code> <a href="https://github.com/torvalds/linux/commit/8a3db1849e9e2563727ea2dc32737502e0096641">fix for remount data corruption</a>.
Without the fix <code>btrfs</code> always triggered restore code if
<code>mount -oremount</code> fails for any reason.</p>
<h2 id="section-13">2011</h2>
<p>16 October: <code>chua</code>: <a href="https://github.com/trofi/chua">started a toy strange attractor render</a>.
My favourite <code>OpenGL</code> app. This allowed me to pass the exam in uni :)</p>
<p>25 August: <code>linux</code>: <code>alpha</code> <a href="https://github.com/torvalds/linux/commit/2df7a7d1cd07626dd235ca102830ebfc6c01a09e">fix for <code>osf_setsysinfo()</code></a>
obscure interface.</p>
<p>20 May: <code>linux</code>: <code>btrfs</code> <a href="https://github.com/torvalds/linux/commit/c4f675cd40d955d539180506c09515c90169b15b">performance fix</a>
caused by spinning shrinker without a chance of progress.</p>
<p>11 April: <code>linux</code>: <code>btrfs</code> <a href="https://github.com/torvalds/linux/commit/3387206f26e1b48703e810175b98611a4fd8e8ea">data corruption fix</a>
caused by use of <code>memcpy()</code> on overlapping areas.</p>
<h2 id="section-14">2010</h2>
<p>29 August: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/33653031263aa6d5ba4d481c8bb0d8eb1303f4d1">fix <code>ppc</code> crashes on <code>foreign import wrapper</code></a>.</p>
<p>9 July: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/e025c94f0dd63d2b944e502fa9c1d77094e49c89">fix <code>ia64</code> crashes on <code>foreign import wrapper</code></a>.</p>
<p>9 July: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/d12690d5995de055d7e9b8ed04946bbb609b6e98">fix <code>ia64</code> GC pointer chasing</a>.
On <code>ia64</code> pointers use higher bits of 64-bit pattern which broke garbage
collector assumptions.</p>
<p>8 July: <code>ghc</code>: <a href="https://gitlab.haskell.org/ghc/ghc/-/commit/a8dc46dcbeeaf94a5321a1b8932725f7650d7abd">fix <code>alpha</code> build of <code>foreign import wrapper</code></a>.</p>
<h2 id="section-15">2009</h2>
<p>20 January: <code>mc</code>: <a href="https://github.com/MidnightCommander/mc/commit/e0eb9ca1cd30cda67732096528e5573a14e5a1f4">added <code>ebuild.syntax</code> highlighter</a>.</p>
<p>5 January: <code>hichi</code>: <a href="https://github.com/trofi/hichi">started haskell implementation of an Intranet Chat protocol library</a>.
I think I managed to implement a minimal bot. But never expanded it.</p>
<h2 id="section-16">2007</h2>
<p>24 November: <code>valgrind</code>: found a bug in <a href="https://bugs.kde.org/show_bug.cgi?id=152818"><code>rep lodsb</code> instruction emulation</a>.</p>
<p>4 June: <code>ichatd</code>: <a href="https://github.com/trofi/ichatd">started a linux implementation of Intranet Chat</a>.
Managed to use it successfully in LAN against Windows clients.</p>
        </div>
    </body>
</html>
